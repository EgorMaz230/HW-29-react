(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(41)},31:function(e,t,a){},32:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),c=(a(31),a(10)),s=a(2),o=(a(32),a(5)),i=a(8),u=a(42);const d=e=>{u.a.defaults.headers.common.Authorization="Bearer ".concat(e)},m=()=>{delete u.a.defaults.headers.common.Authorization},g=Object(i.b)("auth/register",async(e,t)=>{try{const n=await u.a.post("/users/signup",e);return d(n.data.token),n.data}catch(a){return t.rejectWithValue(a.response.data.message||a.message)}}),b=Object(i.b)("auth/login",async(e,t)=>{try{const n=await u.a.post("/users/login",e);return d(n.data.token),n.data}catch(a){return t.rejectWithValue(a.response.data.message||a.message)}}),p=Object(i.b)("auth/logout",async(e,t)=>{try{await u.a.post("/users/logout"),m()}catch(a){return m(),t.rejectWithValue(a.response.data.message||a.message)}}),E=Object(i.b)("auth/refresh",async(e,t)=>{const a=t.getState().auth.token;if(null===a)return t.rejectWithValue("No token to refresh");try{return d(a),(await u.a.get("/users/current")).data}catch(n){return m(),t.rejectWithValue(n.response.data.message||n.message)}}),h=Object(i.c)({name:"auth",initialState:{user:null,token:null,isLoggedIn:!1,isLoading:!1,error:null},reducers:{clearAuthError(e){e.error=null}},extraReducers:e=>{e.addCase(g.pending,e=>{e.isLoading=!0,e.error=null}).addCase(g.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0}).addCase(g.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.isLoggedIn=!1,e.token=null}).addCase(b.pending,e=>{e.isLoading=!0,e.error=null}).addCase(b.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0}).addCase(b.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.isLoggedIn=!1,e.token=null}).addCase(p.pending,e=>{e.isLoading=!0,e.error=null}).addCase(p.fulfilled,e=>{e.isLoading=!1,e.user=null,e.token=null,e.isLoggedIn=!1}).addCase(p.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.user=null,e.token=null,e.isLoggedIn=!1}).addCase(E.pending,e=>{e.isLoading=!0,e.error=null}).addCase(E.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload,e.isLoggedIn=!0}).addCase(E.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.user=null,e.token=null,e.isLoggedIn=!1})}}),{clearAuthError:j}=h.actions;var y=h.reducer,f=a(12);const L=e=>e.contacts.items,C=e=>e.contacts.isLoading,O=e=>e.contacts.error,v=e=>e.filter,w=e=>e.auth.isLoading,k=e=>e.auth.error,S=e=>e.auth.isLoggedIn,I=e=>{var t;return null===(t=e.auth.user)||void 0===t?void 0:t.email},A=Object(f.a)([L,v],(e,t)=>e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())));var N=()=>{const e=Object(o.b)(),t=Object(o.c)(w),a=Object(o.c)(k),[l,c]=Object(n.useState)(""),[s,i]=Object(n.useState)(""),[u,d]=Object(n.useState)("");return r.a.createElement("div",null,r.a.createElement("h2",null,"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f"),r.a.createElement("form",{onSubmit:t=>{t.preventDefault(),e(g({name:l,email:s,password:u}))}},r.a.createElement("label",null,"\u0406\u043c'\u044f:",r.a.createElement("input",{type:"text",name:"name",value:l,onChange:e=>c(e.target.value),required:!0})),r.a.createElement("label",null,"Email:",r.a.createElement("input",{type:"email",name:"email",value:s,onChange:e=>i(e.target.value),required:!0})),r.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c:",r.a.createElement("input",{type:"password",name:"password",value:u,onChange:e=>d(e.target.value),required:!0})),r.a.createElement("button",{type:"submit",disabled:t},t?"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f...":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f")),a&&r.a.createElement("p",{className:"error-message"},"Error: ",a))};var D=()=>{const e=Object(o.b)(),t=Object(o.c)(w),[a,l]=(Object(o.c)(k),Object(n.useState)("")),[c,s]=Object(n.useState)("");return r.a.createElement("div",null,r.a.createElement("h2",null,"\u0412\u0445\u0456\u0434"),r.a.createElement("form",{onSubmit:t=>{t.preventDefault(),e(b({email:a,password:c}))}},r.a.createElement("label",null,"Email:",r.a.createElement("input",{type:"email",name:"email",value:a,onChange:e=>l(e.target.value),required:!0})),r.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c:",r.a.createElement("input",{type:"password",name:"password",value:c,onChange:e=>s(e.target.value),required:!0})),r.a.createElement("button",{type:"submit",disabled:t},t?"Logging in...":"Login")))};const V=Object(i.b)("contacts/fetchAll",async(e,t)=>{try{return(await u.a.get("/contacts")).data}catch(a){return t.rejectWithValue(a.message)}}),W=Object(i.b)("contacts/addContact",async(e,t)=>{try{return(await u.a.post("/contacts",e)).data}catch(a){return t.rejectWithValue(a.message)}}),q=Object(i.b)("contacts/deleteContact",async(e,t)=>{try{return await u.a.delete("/contacts/".concat(e)),e}catch(a){return t.rejectWithValue(a.message)}});var x=Object(i.c)({name:"contacts",initialState:{items:[],isLoading:!1,error:null},extraReducers:e=>{e.addCase(V.pending,e=>{e.isLoading=!0,e.error=null}).addCase(V.fulfilled,(e,t)=>{e.isLoading=!1,e.items=t.payload}).addCase(V.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(W.pending,e=>{e.isLoading=!0,e.error=null}).addCase(W.fulfilled,(e,t)=>{e.isLoading=!1,e.items.push(t.payload)}).addCase(W.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(q.pending,e=>{e.isLoading=!0,e.error=null}).addCase(q.fulfilled,(e,t)=>{e.isLoading=!1,e.items=e.items.filter(e=>e.id!==t.payload)}).addCase(q.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}}).reducer;const z=Object(i.c)({name:"filter",initialState:"",reducers:{setFilter:(e,t)=>t.payload}}),{setFilter:F}=z.actions;var R=z.reducer;const Z=e=>{let{onAddContact:t,isLoading:a}=e;const[l,c]=Object(n.useState)(""),[s,o]=Object(n.useState)("");return r.a.createElement("form",{onSubmit:e=>{e.preventDefault(),t({name:l,number:s}),c(""),o("")}},r.a.createElement("label",null,"\u0406\u043c'\u044f:",r.a.createElement("input",{type:"text",value:l,onChange:e=>c(e.target.value),pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0406\u043c'\u044f \u043c\u043e\u0436\u0435 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043b\u0438\u0448\u0435 \u043b\u0456\u0442\u0435\u0440\u0438, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444, \u0442\u0438\u0440\u0435 \u0442\u0430 \u043f\u0440\u043e\u0431\u0456\u043b\u0438.",required:!0})),r.a.createElement("label",null,"\u041d\u043e\u043c\u0435\u0440:",r.a.createElement("input",{type:"number",value:s,onChange:e=>o(e.target.value),pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443 \u043c\u0430\u0454 \u0441\u043a\u043b\u0430\u0434\u0430\u0442\u0438\u0441\u044f \u0437 \u0446\u0438\u0444\u0440, \u043c\u043e\u0436\u0435 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u043f\u0440\u043e\u0431\u0456\u043b\u0438, \u0434\u0435\u0444\u0456\u0441\u0438, \u0434\u0443\u0436\u043a\u0438 \u0442\u0430 \u043f\u043e\u0447\u0438\u043d\u0430\u0442\u0438\u0441\u044f \u0437 +",required:!0})),r.a.createElement("button",{type:"submit",disabled:a},a?"\u0414\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u044f \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0443...":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"))},B=e=>{let{filter:t,onSetFilter:a}=e;return r.a.createElement("div",{className:"filter-container"},r.a.createElement("label",null,"\u041f\u043e\u0448\u0443\u043a \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432 \u0437\u0430 \u0456\u043c\u0435\u043d\u0435\u043c:",r.a.createElement("input",{type:"text",value:t,onChange:e=>a(e.target.value)})))},J=e=>{let{contact:t,onDeleteContact:a}=e;return r.a.createElement("li",{className:"contact-list-item"},r.a.createElement("span",null,t.name,": ",t.number),r.a.createElement("button",{type:"button",onClick:()=>a(t.id)},"Delete"))},H=e=>{let{contacts:t,onDeleteContact:a}=e;return r.a.createElement("ul",{className:"contact-list"},t.map(e=>r.a.createElement(J,{key:e.id,contact:e,onDeleteContact:a})))};var M=()=>{const e=Object(o.b)(),t=Object(o.c)(L),a=Object(o.c)(C),l=Object(o.c)(O),c=Object(o.c)(v),s=Object(o.c)(A);Object(n.useEffect)(()=>{e(V())},[e]);return r.a.createElement("div",null,r.a.createElement("h1",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u0430 \u043a\u043d\u0438\u0433\u0430"),r.a.createElement(Z,{onAddContact:a=>{t.some(e=>e.name.toLowerCase()===a.name.toLowerCase())?alert("".concat(a.name," \u0432\u0436\u0435 \u0454 \u0432 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430\u0445.")):e(W(a))},isLoading:a}),r.a.createElement("h2",null,"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"),r.a.createElement(B,{filter:c,onSetFilter:t=>{e(F(t))}}),a&&!l&&r.a.createElement("p",{className:"loading-message"},"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432..."),l&&r.a.createElement("p",{className:"error-message"},"Error: ",l),!a&&!l&&0===t.length&&r.a.createElement("p",null,"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e."),!a&&!l&&s.length>0&&r.a.createElement(H,{contacts:s,onDeleteContact:t=>{e(q(t))}}),!a&&!l&&t.length>0&&0===s.length&&c&&r.a.createElement("p",null,"\u041d\u0435\u043c\u0430\u0454 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432, \u0449\u043e \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0430\u044e\u0442\u044c \u0432\u0430\u0448\u043e\u043c\u0443 \u0444\u0456\u043b\u044c\u0442\u0440\u0443."))};var U=()=>{const e=Object(o.b)(),t=Object(o.c)(I);return r.a.createElement("div",{className:"user-menu"},r.a.createElement("p",null,t),r.a.createElement("button",{type:"button",onClick:()=>{e(p())}},"\u0412\u0438\u0439\u0442\u0438"))};var $=()=>{const e=Object(o.c)(S);return r.a.createElement("nav",{className:"main-nav"},r.a.createElement(c.c,{to:"/"},"Home"),!e&&r.a.createElement(c.c,{to:"/register"},"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f"),!e&&r.a.createElement(c.c,{to:"/login"},"\u0412\u0445\u0456\u0434"),e&&r.a.createElement(c.c,{to:"/contacts"},"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"),e&&r.a.createElement(U,null))};var G=e=>{let{children:t}=e;return Object(o.c)(e=>e.auth.isLoggedIn)?t:r.a.createElement(s.a,{to:"/login"})};var K=function(){const e=Object(o.b)(),t=Object(o.c)(S),a=Object(o.c)(w);return Object(n.useEffect)(()=>{e(E())},[e]),a?r.a.createElement("p",{className:"loading-message"},"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430..."):r.a.createElement(c.a,null,r.a.createElement($,null),r.a.createElement("div",{className:"container"},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/register",element:r.a.createElement(N,null)}),r.a.createElement(s.b,{path:"/login",element:r.a.createElement(D,null)}),r.a.createElement(s.b,{path:"/contacts",element:r.a.createElement(G,null,r.a.createElement(M,null))}),r.a.createElement(s.b,{path:"/",element:t?r.a.createElement("p",null,"\u041b\u0430\u0441\u043a\u0430\u0432\u043e \u043f\u0440\u043e\u0441\u0438\u043c\u043e! \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0434\u043e ",r.a.createElement(c.b,{to:"/contacts"},"\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432")):r.a.createElement("p",null,"\u041b\u0430\u0441\u043a\u0430\u0432\u043e \u043f\u0440\u043e\u0441\u0438\u043c\u043e! \u041f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u0434\u043e ",r.a.createElement(c.b,{to:"/register"},"\u0440\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u0457")," \u0430\u0431\u043e ",r.a.createElement(c.b,{to:"/login"},"\u0443\u0432\u0456\u0439\u0434\u0456\u0442\u044c"),".")}))))},P=a(11),Q=a(24);const T={key:"auth",storage:a.n(Q).a,whitelist:["token"]},X=Object(i.a)({reducer:{contacts:x,filter:R,auth:Object(P.g)(T,y)},middleware:e=>e({serializableCheck:{ignoredActions:[P.a,P.f,P.b,P.c,P.d,P.e]}})});Object(P.h)(X);a(40);u.a.defaults.baseURL="https://connections-api.goit.global/",Object(l.createRoot)(document.getElementById("root")).render(r.a.createElement(n.StrictMode,null,r.a.createElement(o.a,{store:X},r.a.createElement(K,null))))}},[[25,1,2]]]);
//# sourceMappingURL=main.23a21d5f.chunk.js.map